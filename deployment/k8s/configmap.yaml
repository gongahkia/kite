apiVersion: v1
kind: ConfigMap
metadata:
  name: kite-config
  namespace: kite
  labels:
    app: kite
    component: config
data:
  config.yaml: |
    server:
      host: "0.0.0.0"
      port: 8080
      read_timeout: "30s"
      write_timeout: "30s"
      shutdown_timeout: "10s"
      enable_grpc: true
      grpc_port: 9090

    database:
      driver: "postgres"
      host: "postgres"
      port: 5432
      database: "kite"
      max_open_conns: 25
      max_idle_conns: 5
      conn_max_lifetime: "5m"
      ssl_mode: "disable"

    queue:
      driver: "nats"
      url: "nats://nats:4222"
      max_retries: 3
      retry_delay: "5s"

    worker:
      count: 4
      job_timeout: "5m"
      shutdown_grace: "30s"

    scraper:
      user_agent: "Kite/4.0 (Legal Research Bot; +https://github.com/gongahkia/kite)"
      request_timeout: "30s"
      max_retries: 3
      rate_limit_per_min: 20
      respect_robots_txt: true
      concurrent_limit: 10

    observability:
      log_level: "info"
      log_format: "json"
      metrics_enabled: true
      metrics_port: 9091

    auth:
      jwt_expiration: "24h"
      api_key_enabled: true
      rate_limit_per_min: 100
